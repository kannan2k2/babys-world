<%- include('header') %>

<style>
body {
    background: rgb(217, 213, 218);
}

.form-control:focus {
    box-shadow: none;
    border-color: #BA68C8;
}

.profile-button {
    background: rgb(147, 143, 143);
    box-shadow: none;
    border: none;
}

.profile-button:hover {
    background: #682773;
}

.profile-button:focus {
    background: #682773;
    box-shadow: none;
}

.profile-button:active {
    background: #682773;
    box-shadow: none;
}

.update-button {
    background: #BA68C8;
    box-shadow: none;
    border: none;
    margin-left: 10px;
}

.update-button:hover {
    background: #8A2D8A;
}

.update-button:focus {
    background: #8A2D8A;
    box-shadow: none;
}

.update-button:active {
    background: #8A2D8A;
    box-shadow: none;
}

.back:hover {
    color: #682773;
    cursor: pointer;
}

.labels {
    font-size: 11px;
}

.add-experience:hover {
    background: #BA68C8;
    color: #fff;
    cursor: pointer;
    border: solid 1px #BA68C8;
}

.sidebar-button {
    background: rgb(99, 39, 120);
    color: white;
    width: 100%;
    margin-bottom: 10px;
    border: 2px solid white;
    border-radius: 5px;
}

.sidebar-button:hover {
    background: #682773;
    border-color: #682773;
}

.bordered-div {
    border: 1px solid #000; /* Black border with 2px width */
    padding: 15px; /* Optional: Add some padding inside the border */
    border-radius: 5px; /* Optional: Add rounded corners */
}

.col-md-3 {
    padding-top: 20px;
}
</style>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>
<div class="container d-flex justify-content-center">
    <div class="row d-flex align-items-start bg-white mt-5 mb-5 p-4 rounded w-100">
        <div class="col-md-8 border-end">
            <div class="p-3 py-5">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h4 class="text-right">Contact Information</h4>
                </div>
                <form id="profileForm" action="/userEditAddressPost" method="post" onsubmit="return showAlert()">
                    <div class="form-group">
                        <label class="labels">First Name</label>
                        <input type="text" class="form-control" placeholder="First name" value="<%= user.firstname %>" name="first_name">
                    </div>
                    <div class="form-group">
                        <label class="labels">Last Name</label>
                        <input type="text" class="form-control" placeholder="Last name" value="<%= user.lastname %>" name="last_name">
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-12">
                            <label class="labels">Email ID</label>
                            <input type="text" class="form-control" placeholder="enter email id" value="<%= user.email %>" name="email" disabled>
                        </div>
                    </div>

                    <!-- Referral Code Section -->
                    <div class="form-group mt-3">
                        <label class="labels">Referral Code</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="referralCode" value="<%= user.referalCode %>" readonly>
                            <button class="btn btn-outline-secondary" type="button" onclick="copyReferralCode()">Copy</button>
                        </div>
                    </div>
                    
                    <div class="mt-5 text-center">
                        <button id="saveProfileButton" class="btn btn-primary profile-button" type="submit">Save Profile</button>
                    </div>
                </form>
            </div>
        </div>
        <div class="col-md-3 ms-4 bordered-div">
            <div class="p-3 py-5">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h4>Actions</h4>
                </div>
                <div class="list-group">
                    <a href="/userorderdetail" class="list-group-item list-group-item-action">Show Orders</a>
                    <a href="/getwishlist" class="list-group-item list-group-item-action">Wishlist</a>
                    <a href="/addressbook" class="list-group-item list-group-item-action">Address Book</a>
                    <a href="/wallet" class="list-group-item list-group-item-action">Wallet</a>
                    <a href="/userchangepass" class="list-group-item list-group-item-action">Change Password</a>
                    <a href="/userlogout" class="list-group-item list-group-item-action">Logout</a>
                </div>
            </div>
        </div>
    </div>
</div>
<%-include('footer')  %>

<!-- JavaScript to copy the referral code -->
<script>
function showAlert() {
    alert('Your profile has been updated.');
    return true;
}

function copyReferralCode() {
    // Get the referral code input field
    var referralCodeInput = document.getElementById("referralCode");

    // Select the text field
    referralCodeInput.select();
    referralCodeInput.setSelectionRange(0, 99999); // For mobile devices

    // Copy the text inside the text field
    document.execCommand("copy");

    // Alert the user that the code has been copied
    alert("Referral Code copied: " + referralCodeInput.value);
}
</script>
</body>
</html>