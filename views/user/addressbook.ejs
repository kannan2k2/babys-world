<%- include('header') %>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Address Book</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/MaterialDesign-Webfont/5.3.45/css/materialdesignicons.css" integrity="sha256-NAxhqDvtY0l4xn+YVa6WjAcmd94NNfttjNsDmNatFVc=" crossorigin="anonymous" />
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <style>
    body {
      margin-top: 20px;
      background-color: #f6f6f6;
    }

    .activity-checkout {
      list-style: none;
      padding-left: 0;
    }

    .activity-checkout .checkout-item {
      position: relative;
      padding: 20px;
      background-color: #fff;
      border-radius: 0.75rem;
      margin-bottom: 10px;
      box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    }

    .activity-checkout .checkout-item:last-child {
      border-color: transparent;
    }

    .card-radio {
      background-color: #fff;
      border: 2px solid #eff0f2;
      border-radius: .75rem;
      padding: 1rem;
      transition: all 0.3s;
    }

    .card-radio:hover {
      cursor: pointer;
      border-color: #3b76e1;
    }

    .card-radio-input {
      display: none;
    }

    .card-radio-input:checked + .card-radio {
      border-color: #3b76e1 !important;
    }

    .form-container {
      width: 100%;
      padding: 20px;
      background-color: #fff;
      border-radius: 0.75rem;
      box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    }

    .button {
      display: inline-block;
      padding: 5px 8px;
      font-size: 16px;
      text-align: center;
      text-decoration: none;
      border-radius: 3px;
      margin: 5px;
      transition: background-color 0.3s;
    }

    .edit-button {
      background-color: #28a745; /* Green */
      color: white;
    }

    .edit-button:hover {
      background-color: #218838;
    }

    .delete-button {
      background-color: #dc3545; /* Red */
      color: white;
    }

    .delete-button:hover {
      background-color: #c82333;
    }
  </style>
</head>
<body>
  <div class="container-fluid mt-5">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="activity-checkout">
          <div class="checkout-item">
            <h1 class="font-size-13 mb-3">Address</h1>
            <div class="center-form">
              <form class="form-container" action="/addressbookpost" method="post" onsubmit="return validateForm()">
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label class="form-label" for="billing-name">Name</label>
                    <input type="text" class="form-control" id="billing-name" placeholder="Enter name" name="name" required>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label" for="billing-phone">Phone</label>
                    <input type="tel" class="form-control" id="billing-phone" placeholder="Enter Phone no." name="phone" pattern="[0-9]{10}" required>
                  </div>
                </div>
                <div class="mb-3">
                  <label class="form-label" for="billing-address">Address</label>
                  <textarea class="form-control" id="billing-address" rows="3" placeholder="Enter full address" name="address" required></textarea>
                </div>
                <div class="row mb-3">
                  <div class="col-md-4">
                    <label class="form-label" for="billing-state">State</label>
                    <input type="text" class="form-control" id="billing-state" placeholder="Enter State" name="state" required>
                  </div>
                  <div class="col-md-4">
                    <label class="form-label" for="billing-city">City</label>
                    <input type="text" class="form-control" id="billing-city" placeholder="Enter City" name="city" required>
                  </div>
                  <div class="col-md-4">
                    <label class="form-label" for="zip-code">Zip / Postal code</label>
                    <input type="text" class="form-control" id="zip-code" placeholder="Enter Postal code" name="zip" pattern="[0-9]{5,6}" required>
                  </div>
                </div>
                <div class="text-end">
                  <button class="btn btn-success">
                    <i class="mdi mdi-cart-outline me-1"></i> Proceed
                  </button>
                </div>
              </form>
            </div>
          </div>
          <div class="checkout-item">
            <h5 class="font-size-16 mb-3">Address Book</h5>
            <div class="row">
              <% data.forEach((ele, i) => { %>
                <div class="col-lg-4 col-sm-6 mb-3">
                  <label class="card-radio-label">
                    <div class="card-radio text-truncate">
                      <span class="fs-14 mb-2 d-block"><%= ele.name %></span>
                      <span class="text-muted fw-normal text-wrap mb-1 d-block"><%= ele.address %></span>
                      <span class="text-muted fw-normal text-wrap mb-1 d-block"><%= ele.zip %></span>
                      <span class="text-muted fw-normal d-block"><%= ele.phone %></span>
                      <div class="mt-2">
                        <a href="/editaddress/<%= ele._id %>/<%= i %>" class="button edit-button">Edit</a>
                        <a href="/deleteaddress/<%= ele._id %>" class="button delete-button">Delete</a>
                      </div>
                    </div>
                  </label>
                </div>
              <% }); %>
            </div>
          </div>
        </div>
        <div class="row my-4">
          <div class="col">
            <!-- <a href="ecommerce-products.html" class="btn btn-link text-muted">
              <i class="mdi mdi-arrow-left me-1"></i> Continue Shopping
            </a> -->
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-+I4IZW8Au58pYxCvWQaVo0wzW3sDq8f4TpyV7B6v7K6YJH5iCV3KKHIsHhDkL7Ay" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGggjDja0wcxJRH2oBXmjs1LyfYIoaiq80K2lz50QKfpANh6R9K7e9Zg42Q" crossorigin="anonymous"></script>
  <script>
    function validateForm() {
      const name = document.getElementById('billing-name').value;
      const phone = document.getElementById('billing-phone').value;
      const address = document.getElementById('billing-address').value;
      const state = document.getElementById('billing-state').value;
      const city = document.getElementById('billing-city').value;
      const zip = document.getElementById('zip-code').value;

      if (name === "" || phone === "" || address === "" || state === "" || city === "" || zip === "") {
        alert("All fields must be filled out");
        return false;
      }

      const phonePattern = /^[0-9]{10}$/;
      if (!phonePattern.test(phone)) {
        alert("Phone number must be 10 digits long");
        return false;
      }

      const zipPattern = /^[0-9]{5,6}$/;
      if (!zipPattern.test(zip)) {
        alert("Zip/Postal code must be 5 or 6 digits long");
        return false;
      }

      return true;
    }
  </script>
  <%- include('footer') %>
</body>
</html>
